<div class="card">
    <p-table [value]="products" [paginator]="true" [rows]="rows" [tableStyle]="{ 'min-width': '50rem' }"
        [rowsPerPageOptions]="[5, 10, 20, 30]">
        <ng-template pTemplate="header">
            <tr>
                <th style="width:20%">Id</th>
                <th style="width:20%">Name</th>
                <th style="width:20%">Price</th>
                <th style="width:20%">Stock</th>
                <th style="width:20%">Status</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
            <tr (click)="onRowClick($event, product)">
                <td>{{ product.id }}</td>
                <td>{{ product.name }}</td>
                <td>{{ product.price }}</td>
                <td>{{ product.stock }}</td>
                <td>
                    <p-dropdown 
                        [options]="statusOptions"
                        [(ngModel)]="product.status"
                        [placeholder]="'Select Status'"
                        (onChange)="onStatusChange(product)"
                        (click)="$event.stopPropagation()"
                        appendTo="body"
                    ></p-dropdown>
                </td>

            </tr>
        </ng-template>
    </p-table>
</div>

<!-- Product card for row details -->
<div class="modal" *ngIf="selectedProduct" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <h2>Product Details</h2>
        <p><strong>Id:</strong> {{ selectedProduct.id }}</p>
        <p><strong>Name:</strong> {{ selectedProduct.name }}</p>
        <p><strong>Price:</strong> {{ selectedProduct.price }}</p>
        <p><strong>Stock:</strong> {{ selectedProduct.stock }}</p>
        <p>
            <strong>Status:</strong>
            <span [ngClass]="getStatusClass(selectedProduct.status)">
                {{ selectedProduct.status || 'Status not selected' }}
            </span>
        </p>
        <button (click)="closeModal()">Close</button>
    </div>
</div>